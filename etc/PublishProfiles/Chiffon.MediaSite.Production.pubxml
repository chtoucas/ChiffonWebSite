<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <SingleAssemblyName>Chiffon.MediaSite.AspNet</SingleAssemblyName>
  </PropertyGroup>

  <ItemGroup>
    <ExcludeFromPackageFiles 
      Include="$(MSBuildProjectDirectory)\Properties\Chiffon.snk;$(MSBuildProjectDirectory)\packages.config">
      <FromTarget>pubxml</FromTarget>
    </ExcludeFromPackageFiles>
  </ItemGroup>

  <!--
  <ItemGroup>
    <ConfigFiles Include="$(ConfigDir)\*.config"></ConfigFiles>
  </ItemGroup>

  <Target Name="_CopyConfigs" AfterTargets="PipelineDeployPhase">
    <Copy SourceFiles="@(ConfigFiles)"
          DestinationFiles="@(ConfigFiles->'$(publishUrl)\config\%(Filename)%(Extension)')" />
  </Target>
  -->

  <Target Name="_TransformConfig" AfterTargets="PipelineDeployPhase">
    <TransformXml Source="$(publishUrl)\Web.config"
                  Destination="$(publishUrl)\Web.config"
                  Transform="$(TransformsDir)\Chiffon.MediaSite.$(PublishTarget).config" />
  </Target>
</Project>