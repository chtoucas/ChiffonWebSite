@using Chiffon.Entities

@model PatternViewModel

@{
 Layout = "~/Views/Shared/_DesignerLayout.cshtml";

 var views = Model.PatternViews;
 var viewCount = views.Count();
}

@Html.Partial(ViewName.Shared.DesignerInfo, Model.Designer)
<ul class="mosaic patterns">
 @foreach (var view in Model.PatternViews) {
  var version = viewCount == 1 || String.IsNullOrWhiteSpace(@view.Version) ? "" : " (" + @view.Version + ")";
  <li class=pattern id="@view.Version">
   <img src="@Url.PatternContent(view.DesignerKey, view.Reference, view.Version)" alt="@view.Description" /><div class=watermark><span>Ref @Model.Reference @version</span></div>
  </li>
 }
</ul>
@*
 Navigation dans les différentes vues du motif.
*@
<p id=nav_views class=nav_views>
 @if (viewCount > 1) {
  <span class=prev_noop>@VR.Pager_Previous</span>
  <a class="underline hide prev" href="#">@VR.Pager_Previous</a>
  <span>/</span>
  <a class="underline next" href="#@views.Skip(1).Take(1).Single().Version">@VR.Pager_Next</a>
  <span class="hide next_noop">@VR.Pager_Next</span>
  @: -
  <span class=pos>1</span> @VR.Pager_Of @: @viewCount
  }
</p>
@*
 Liste des motifs.
*@
<ul class="mosaic mosaic_75 clearfix">
 @foreach (var preview in Model.Previews) {
  var anchor = String.IsNullOrWhiteSpace(@preview.Version) ? "" : "#" + @preview.Version;
  <li>
   <a href="@Url.Pattern(preview.DesignerKey, preview.CategoryKey, preview.Reference, Model.PageIndex)@anchor" class=vignette>
    <img src="@Url.PreviewContent(preview.DesignerKey, preview.Reference, preview.Version)" alt="@preview.Description" /><div class="overlay"></div>
    @*<div class=watermark><span>Ref @preview.Reference</span></div>*@
    <div class=watermark></div>
   </a>
  </li>
 }
</ul>
@*
 Pagination.
*@
@if (Model.PageCount > 1) {
 @ViewHelpers.Pager(Url, Model)
}

