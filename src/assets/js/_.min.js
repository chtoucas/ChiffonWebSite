(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function c(a){return a}function b(a){return decodeURIComponent(a.replace(k," "))}function m(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(b){}}var k=/\+/g,f=e.cookie=function(a,d,g){if(void 0!==d){g=e.extend({},f.defaults,g);if("number"===typeof g.expires){var n=g.expires,h=g.expires=new Date;h.setDate(h.getDate()+n)}d=f.json?
JSON.stringify(d):String(d);return document.cookie=[f.raw?a:encodeURIComponent(a),"=",f.raw?d:encodeURIComponent(d),g.expires?"; expires="+g.expires.toUTCString():"",g.path?"; path="+g.path:"",g.domain?"; domain="+g.domain:"",g.secure?"; secure":""].join("")}d=f.raw?c:b;g=document.cookie.split("; ");for(var n=a?void 0:{},h=0,k=g.length;h<k;h++){var l=g[h].split("="),p=d(l.shift()),l=d(l.join("="));if(a&&a===p){n=m(l);break}a||(n[p]=m(l))}return n};f.defaults={};e.removeCookie=function(a,b){return void 0!==
e.cookie(a)?(e.cookie(a,"",e.extend({},b,{expires:-1})),!0):!1}});
(function(){var e=self.navigator,c=String,b=Object.prototype.hasOwnProperty,m={},k={},f=/^\s*application\/(?:vnd\.oftn\.|x-)?l10n\+json\s*(?:$|;)/i,a,d=Array.prototype.indexOf||function(a){for(var b=this.length,c=0;c<b;c++)if(c in this&&this[c]===a)return c;return-1},g=function(b){var c=new a;c.open("GET",b,!1);c.send(null);return 200!==c.status?(setTimeout(function(){var a=Error("Unable to load localization data: "+b);a.name="Localization Error";throw a;},0),{}):JSON.parse(c.responseText)},n=c.toLocaleString=
function(a){if(0<arguments.length&&"number"!==typeof a)if("string"===typeof a)n(g(a));else if(!1===a)k={};else{var d,e,h;for(d in a)if(b.call(a,d)&&(e=a[d],d=d.toLowerCase(),d in k&&!1!==e||(k[d]={}),!1!==e)){if("string"===typeof e)if(0===c.locale.toLowerCase().indexOf(d))e=g(e);else{d in m||(m[d]=[]);m[d].push(e);continue}for(h in e)b.call(e,h)&&(k[d][h]=e[h])}}return Function.prototype.toLocaleString.apply(c,arguments)},h,t=c.prototype.toLocaleString=function(){var a=h,b=c[a?"defaultLocale":"locale"].toLowerCase().split("-"),
d=b.length,e=this.valueOf(),f;h=!1;do{f=b.slice(0,d).join("-");if(f in m){for(var l=f,q=m[l],p=0,r=q.length,s=void 0;p<r;p++)s={},s[l]=g(q[p]),n(s);delete m[l]}if(f in k&&e in k[f])return k[f][e]}while(1<d--);return!a&&c.defaultLocale?(h=!0,t.call(e)):e};if("undefined"===typeof XMLHttpRequest&&"undefined"!==typeof ActiveXObject){var l=ActiveXObject;a=function(){try{return new l("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new l("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new l("Msxml2.XMLHTTP")}catch(d){}throw Error("XMLHttpRequest not supported by this browser.");
}}else a=XMLHttpRequest;c.defaultLocale=c.defaultLocale||"";c.locale=e&&(e.language||e.userLanguage)||"";if("undefined"!==typeof document)for(var e=document.getElementsByTagName("link"),p=e.length,q;p--;){var r=e[p];q=(r.getAttribute("rel")||"").toLowerCase().split(/\s+/);f.test(r.type)&&(-1!==d.call(q,"localizations")?n(r.getAttribute("href")):-1!==d.call(q,"localization")&&(q={},q[(r.getAttribute("hreflang")||"").toLowerCase()]=r.getAttribute("href"),n(q)))}})();
String.toLocaleString({fr:{"%ajax.loading":"En cours","%ajax.done":"Termin\u00e9","%ajax.temp_error":"Un probl\u00e8me temporaire est intervenue. Veuillez r\u00e9essayer plus tard","%ajax.fatal_error":"Une erreur est intervenue. Veuillez r\u00e9essayer plus tard","%home.watermark":"Voir toute la collection &gt;","%member.watermark":"Voir toute la collection &gt;"},en:{"%ajax.loading":"Loading","%ajax.done":"Done","%ajax.temp_error":"A temporary error occured. Please try again later","%ajax.fatal_error":"An error occured. Please try again later",
"%home.watermark":"Go to the collection &gt;","%member.watermark":"Go to the collection &gt;"}});
(function(e,c,b,m){function k(a){var d=c('<div class="modal register"></div>');d.appendTo("BODY");b.ui.modal[a]={show:function(){d.show();d.css("margin-top",-d.height()/2);d.css("margin-left",-d.width()/2)}}}var f=m===c.cookie("auth");c.fn.watermark=function(a){return this.each(function(){c(this).append("<div class=overlay></div><div class=watermark><span>"+a.toLocaleString()+"</span>")})};b.config=function(a){a=c.extend({},b.config.defaults,a);b.locale(c("html").attr("lang")||a.defaultLocale);b.ajaxSetup(a.ajaxTimeout);
return b};b.config.defaults={ajaxTimeout:3E3,defaultLocale:"fr"};b.locale=function(a){String.locale=a};b.ajaxSetup=function(a){c.ajaxSetup({timeout:a,async:!0,cache:!0})};b.handle=function(a,d){b.ui.init();if(b.routes.hasOwnProperty(a))b.routes[a](d)};b.ui={};b.ui.init=function(){c("A[rel=external]").click(function(){e.open(this.href);return!1});b.ui.ajaxStatus();b.ui.overlay.init();f&&(k("register"),c("A[rel~=modal]").click(function(a){a.preventDefault();b.ui.modal.register.show();c.ajax({type:"GET",
global:!1,dataType:"html",url:this.href,success:function(a){a=c("<html />").html(a);c(".register").html(a.find("#content").html());b.ui.overlay.show()}})}))};b.ui.modal={};b.ui.overlay=function(){var a=c("<div class=overlay></div>");return{init:function(){a.appendTo("BODY");a.height(screen.height);a.width(screen.width)},show:function(){a.fadeIn()},hide:function(){a.hide()}}}();b.ui.ajaxStatus=function(){var a=c("<div id=ajax_status></div>"),b=!1;a.appendTo("BODY");c(document).ajaxStart(function(){a.removeClass("error").text("%ajax.loading".toLocaleString()).show()}).ajaxStop(function(){b?
b=!1:a.fadeOut("slow")}).ajaxError(function(c,e){var f=(0==e.status?"%ajax.temp_error":"%ajax.fatal_error").toLocaleString();b=!0;a.text(f).addClass("error").show().fadeOut(5E3)})};b.ui.mosaic=function(a){c(".mosaic").removeClass("shadow");c(".vignette").watermark(a)};b.routes={};b.routes.home=function(){b.ui.mosaic("%home.watermark")};b.routes.member=function(){b.ui.mosaic("%member.watermark")};return b})(this,jQuery,chiffon);
